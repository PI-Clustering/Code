{% extends "webApp/base_site.html" %}
{% block title %}Home{% endblock %}

{% block stylesheets %}
{{ block.super }}


{% endblock stylesheets %}


{% block content %}
<h1>Chart</h1>
<div id="time-progression-chart" style="width:100%; height:400px;"></div>
<div id="ari-progression-chart" style="width:100%; height:400px;"></div>
{% endblock content %}



{% block javascripts %}
{{ block.super }}

<script>


    var make_charts = function (data) {

        console.log(data);

        Highcharts.chart('time-progression-chart', {

            chart: {
                zoomType: 'x'
            },

            title: {
                text: 'Execution time progression by iteration'
            },

            subtitle: {
                text: 'Source: own simulations'
            },

            yAxis: {
                title: {
                    text: 'Execution time, s'
                }
            },

            xAxis: {
                type: 'integer',
                title: {
                    text: 'Iteration step'
                }
            },

            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            tooltip: {
                pointFormat: '{series.name} algo takes <b>{point.y:,.2f}</b><br/> for {point.x} iterations'
            },

            series: data.time

        });

        Highcharts.chart('ari-progression-chart', {

            chart: {
                type: 'arearange',
                zoomType: 'x',
                scrollablePlotArea: {
                    minWidth: 600,
                    scrollPositionX: 1
                }
            },

            title: {
                text: 'Adjusted Risk Index / AMI progression by iteration'
            },

            subtitle: {
                text: 'Source: own simulations'
            },

            xAxis: {
                type: 'integer',
                title: {
                    text: 'Iteration step'
                }
            },

            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            tooltip: {
                pointFormat: '{series.name} algo has converged to <b>{point.y:,.2f}</b><br/>after {point.x} iterations'
            },

            yAxis: {
                min: 0,
                max: 1,
                title: {
                    text: 'ARI/AMI'
                }
            },

            series: data.ari

        });


    }

    $(function () {
        // Document is ready

        $.getJSON("/GetChartData", make_charts);


    });

</script>

{% endblock javascripts %}