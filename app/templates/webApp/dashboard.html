{% extends "webApp/base_site.html" %}
{% block title %}Home{% endblock %}

{% block stylesheets %}
{{ block.super }}


{% endblock stylesheets %}


{% block content %}
<h1>Chart</h1>
<div id="ami-progression-chart" style="width:100%; height:400px;"></div>
<div id="time-progression-chart" style="width:100%; height:400px;"></div>
{% endblock content %}



{% block javascripts %}
{{ block.super }}
<img src="/bench.jpg" width="50" height="50">
<script>


    var make_charts = function (data) {

        console.log(data);

        Highcharts.chart('time-progression-chart', {

            chart: {
                zoomType: 'x'
            },

            title: {
                text: 'Execution time progression by iteration'
            },

            subtitle: {
                text: 'Source: own simulations'
            },

            yAxis: {
                title: {
                    text: 'Execution time, s'
                }
            },

            xAxis: {
                type: 'integer',
                title: {
                    text: 'Iteration step'
                }
            },

            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            tooltip: {
                pointFormat: '{series.name} algo takes <b>{point.y:,.2f}</b><br/> for {point.x} iterations'
            },

            series: [{
                data: data.time.own,
                name: 'GMM Schema'
            },
            {
                data: data.time.hbscan,
                name: 'HBScan'
            },
            {
                data: data.time.hana,
                name: 'MR Schema'
            }]

        });

        Highcharts.chart('ami-progression-chart', {

            chart: {
                zoomType: 'x'
            },

            title: {
                text: 'AMI progression by iteration'
            },

            subtitle: {
                text: 'Source: own simulations'
            },

            xAxis: {
                type: 'integer',
                title: {
                    text: 'Iteration step'
                }
            },

            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'middle'
            },

            tooltip: {
                pointFormat: '{series.name} algo has converged to <b>{point.y:,.2f}</b><br/>after {point.x} iterations'
            },

            yAxis: {
                min: 0,
                max: 1,
                title: {
                    text: 'AMI'
                }
            },

            series: [{
                data: data.ami.own,
                name: 'GMM Schema'
            },
            {
                data: data.ami.hbscan,
                name: 'HBScan'
            },
            {
                data: data.ami.hana,
                name: 'MR Schema'
            }]

        });
    }

    $(function () {
        // Document is ready

        $.getJSON("/GetChartData", make_charts);


    });

</script>

{% endblock javascripts %}
